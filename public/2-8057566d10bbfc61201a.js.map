{"version":3,"sources":["webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/components/search.js","webpack:///./src/components/blockstackProfile.js","webpack:///./src/components/header.js","webpack:///./src/components/layout.js","webpack:///./src/app/services/blockstack.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js"],"names":["__webpack_require__","d","__webpack_exports__","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","a","StaticQueryContext","React","createContext","StaticQueryDataRenderer","_ref","staticQueryData","data","query","render","finalData","createElement","Fragment","props","children","Consumer","propTypes","PropTypes","object","string","isRequired","func","Search","_this","_Component","call","this","getOrCreateIndex","index","Index","load","searchIndex","search","evt","target","value","setState","results","expand","map","ref","documentStore","getDoc","state","_this2","react_default","gatsby_browser_entry","type","onChange","placeholder","List","page","appNodes","allApps","edges","filter","e","node","appcoid","icon","length","localFile","childImageSharp","gatsby_image_default","fixed","width","height","ListItem","key","id","to","style","color","fontWeight","textDecoration","Grid","container","item","xs","Typography","name","category","description","_1693737245","Component","BlockstackProfile","isSignedIn","isLoading","componentDidMount","checkIsSignedIn","then","signedIn","userData","getUser","signIn","redirectToSignIn","avatars","avatar","_this3","_this$state","profile","image","i","contentUrl","Avatar","alt","username","src","cursor","marginBottom","onClick","navigateTo","AccountBox_default","dist","variant","Header","siteTitle","siteDescription","siteSearchIndex","Container","background","paddingTop","sm","search_Search","blockstackProfile","defaultProps","Layout","header","site","siteMetadata","title","margin","maxWidth","padding","fontSize","Date","getFullYear","href","getApiServer","_2239313339","appConfig","AppConfig","window","location","origin","uSession","UserSession","configure","apiServer","process","userSession","getConfig","isBrowser","isUserSignedIn","loadUserData","handleLogin","callback","console","log","isSignInPending","handlePendingSignIn","User","createWithCurrentUser","Promise","resolve","user","logout","GroupMembership","clearStorage","signUserOut","encryptContent","message","loadMyData","getFile","content","JSON","parse","loadAppData","identifier","saveMyData","putFile","stringify","postUserUpdate","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","visibility","userComment","wrap","_context","prev","next","save","savePrivately","Error","abrupt","stop","_x","_x2","apply","arguments","m","module","exports","require","default","ProdPageRenderer","pageResources","InternalPageRenderer","Object","assign","json","shape","pathname"],"mappings":"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","file":"2-8057566d10bbfc61201a.js","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","import React, { Component } from 'react'\nimport { Index } from 'elasticlunr'\nimport { Link, graphql, StaticQuery } from 'gatsby'\nimport { List, ListItem, Typography, Grid } from '@material-ui/core'\nimport Img from 'gatsby-image'\n// Search component\n\nexport default class Search extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      query: ``,\n      results: [],\n    }\n  }\n\n  render() {\n    return (\n      <StaticQuery\n        query={graphql`\n          query SearchQuery {\n            allApps {\n              edges {\n                node {\n                  appcoid: id__normalized\n                  localFile {\n                    id\n                    childImageSharp {\n                      fixed(width: 24, height: 24) {\n                        ...GatsbyImageSharpFixed\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        `}\n        render={data => {\n          return (\n            <div>\n              <input\n                type=\"text\"\n                value={this.state.query}\n                onChange={this.search}\n                placeholder=\"Search apps by name, ..\"\n              />\n              <List>\n                {this.state.results.map(page => {\n                  const appNodes = data.allApps.edges.filter(\n                    e => e.node.appcoid === page.appcoid\n                  )\n                  const icon =\n                    appNodes.length > 0 &&\n                    appNodes[0].node.localFile &&\n                    appNodes[0].node.localFile.childImageSharp ? (\n                      <Img\n                        fixed={appNodes[0].node.localFile.childImageSharp.fixed}\n                      />\n                    ) : (\n                      <div width=\"24px\" height=\"24px\" />\n                    )\n                  return (\n                    <ListItem key={page.id}>\n                      <Link\n                        to={'/appco/' + page.appcoid}\n                        style={{\n                          color: `white`,\n                          fontWeight: 'bold',\n                          textDecoration: `none`,\n                        }}\n                      >\n                        <Grid container>\n                          <Grid item xs={1}>\n                            {icon}\n                          </Grid>\n                          <Grid item xs={11}>\n                            <Typography>\n                              <b>{page.name}</b>\n                              {': ' + page.category} {' : ' + page.description}\n                            </Typography>\n                          </Grid>\n                        </Grid>\n                      </Link>\n                    </ListItem>\n                  )\n                })}\n              </List>\n            </div>\n          )\n        }}\n      />\n    )\n  }\n  getOrCreateIndex = () =>\n    this.index\n      ? this.index\n      : // Create an elastic lunr index and hydrate with graphql query results\n        Index.load(this.props.searchIndex)\n\n  search = evt => {\n    const query = evt.target.value\n    this.index = this.getOrCreateIndex()\n    this.setState({\n      query,\n      // Query the index with search string to get an [] of IDs\n      results: this.index\n        .search(query, { expand: true })\n        // Map over each ID and return the full document\n        .map(({ ref }) => this.index.documentStore.getDoc(ref)),\n    })\n  }\n}\n","import React, { Component } from 'react'\nimport {\n  getUser,\n  redirectToSignIn,\n  checkIsSignedIn,\n} from '../app/services/blockstack'\nimport { Avatar } from '@material-ui/core'\nimport AccountIcon from '@material-ui/icons/AccountBox'\nimport { BlockstackButton } from 'react-blockstack-button'\nimport { navigateTo } from 'gatsby'\n\nclass BlockstackProfile extends Component {\n  state = {\n    isSignedIn: false,\n    isLoading: true,\n  }\n\n  componentDidMount() {\n    checkIsSignedIn().then(signedIn => {\n      this.setState({ isSignedIn: signedIn, userData: getUser() })\n    })\n  }\n\n  signIn() {\n    redirectToSignIn()\n  }\n\n  render() {\n    const { isSignedIn, userData } = this.state\n    if (isSignedIn) {\n      let avatars, avatar\n      if (userData.profile && userData.profile.image) {\n        avatars = userData.profile.image.filter(i => i.name === 'avatar')\n      }\n      if (avatars && avatars.length > 0) {\n        avatar = avatars[0].contentUrl\n      }\n      if (avatar) {\n        return (\n          <Avatar\n            alt={userData.username}\n            src={avatar}\n            style={{ cursor: 'pointer', marginBottom: 1.45 + 'rem' }}\n            onClick={() => navigateTo('data')}\n          />\n        )\n      } else {\n        return (\n          <Avatar\n            onClick={() => navigateTo('data')}\n            style={{ cursor: 'pointer', marginBottom: 1.45 + 'rem' }}\n          >\n            <AccountIcon />\n          </Avatar>\n        )\n      }\n    } else {\n      return <BlockstackButton variant=\"light\" onClick={() => this.signIn()} />\n    }\n  }\n}\n\nexport default BlockstackProfile\n","import { Link } from 'gatsby'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport Search from './search'\nimport BlockstackProfile from './blockstackProfile'\nimport { Container, Typography, Grid } from '@material-ui/core'\n\nconst Header = ({ siteTitle, siteDescription, siteSearchIndex }) => (\n  <Container\n    style={{\n      background: '#3f51b5',\n      paddingTop: 1.45 + `rem`,\n      color: 'white',\n    }}\n  >\n    <Grid container>\n      <Grid item sm={8} xs={12}>\n        <Typography variant=\"h3\">\n          <Link to=\"/\" style={{ color: 'white', textDecoration: 'none' }}>\n            {siteTitle}\n          </Link>\n        </Typography>\n        <Typography variant=\"body2\">{siteDescription}</Typography>\n        <Search searchIndex={siteSearchIndex.index} />\n      </Grid>\n      <Grid item sm={4} xs={12}>\n        <BlockstackProfile />\n      </Grid>\n    </Grid>\n  </Container>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n  siteDescription: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { StaticQuery, graphql } from 'gatsby'\n\nimport Header from './header'\nimport './layout.css'\nimport { Typography } from '@material-ui/core'\nimport { getApiServer, getPersonalKey } from '../app/services/blockstack'\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query SiteHeaderQuery {\n        site {\n          siteMetadata {\n            title\n            description\n          }\n        }\n        siteSearchIndex {\n          index\n        }\n      }\n    `}\n    render={data => (\n      <>\n        <Header\n          siteTitle={data.site.siteMetadata.title}\n          siteDescription={data.site.siteMetadata.description}\n          siteSearchIndex={data.siteSearchIndex}\n        />\n        <div\n          style={{\n            margin: `0 auto`,\n            maxWidth: 960,\n            padding: `0px 1.0875rem 1.45rem`,\n            paddingTop: 0,\n          }}\n        >\n          {children}\n          <footer>\n            <Typography variant=\"body2\" style={{ fontSize: 'small' }}>\n              © {new Date().getFullYear()}, Built with\n              {` `}\n              <a href=\"https://www.gatsbyjs.org\">Gatsby</a> and{' '}\n              <a href=\"https://blockstack.org\">Blockstack</a>. You can{' '}\n              <a href=\"https://gitlab.com/friedger/app-center\">\n                view the source here\n              </a>\n              <br />\n              Radiks Server: {getApiServer()}\n            </Typography>\n          </footer>\n        </div>\n      </>\n    )}\n  />\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","import { UserSession, AppConfig } from 'blockstack'\nimport { configure, getConfig, User, GroupMembership, userGroupKeys } from 'radiks'\n\n// helpful for debugging\nconst logAuth = process.env.NODE_ENV === 'development' && true // set to true to turn on logging\nconst clog = (...args) => logAuth && console.log(...args)\n// helpful for debugging\n\nconst appConfig = new AppConfig(\n  ['store_write'],\n  typeof window !== 'undefined'\n    ? window.location.origin\n    : 'http://localhost:8000',\n  '/data',\n  '/manifest.webmanifest'\n)\nconst uSession = new UserSession({ appConfig })\n\nconfigure({\n  apiServer: process.env.GATSBY_RADIKS_SERVER || 'http://localhost:1260',\n  userSession: uSession,\n})\n\nexport const getApiServer = () => getConfig().apiServer\n\nexport const getPersonalKey = () => JSON.stringify(User.currentUser())\n\nexport const isBrowser = () => typeof window !== 'undefined'\n\nexport const getUser = () => {\n  const { userSession } = getConfig()\n  return isBrowser() && userSession.isUserSignedIn()\n    ? userSession.loadUserData()\n    : {}\n}\n\nexport const isSignedIn = () => {\n  const { userSession } = getConfig()\n  return isBrowser() && userSession.isUserSignedIn()\n}\n\nexport const handleLogin = callback => {\n  const { userSession } = getConfig()\n  console.log('handleLogin')\n  clog('isLoggedIn check', userSession.isUserSignedIn())\n  if (userSession.isUserSignedIn()) {\n    clog('logged in')\n    callback(getUser())\n  } else if (userSession.isSignInPending()) {\n    userSession.handlePendingSignIn().then(userData => {\n      User.createWithCurrentUser().then(() => {\n        console.log('user created')\n        callback(userData)\n      })\n    })\n  } else {\n    userSession.redirectToSignIn()\n  }\n}\n\nexport const redirectToSignIn = () => {\n  const { userSession } = getConfig()\n  userSession.redirectToSignIn()\n}\n\nexport const checkIsSignedIn = () => {\n  if (!isBrowser()) {\n    clog('Not a browser')\n    return Promise.resolve(false)\n  }\n  const { userSession } = getConfig()\n  if (userSession.isSignInPending()) {\n    return userSession.handlePendingSignIn().then(() => true)\n  } else if (userSession.isUserSignedIn()) {\n    const user = userSession.loadUserData()\n    clog('isLoggedIn check', { user })\n    return Promise.resolve(!!user)\n  } else {\n    clog('isLoggedIn check - nothing')\n    return Promise.resolve(false)\n  }\n}\n\nexport const logout = callback => {\n  const { userSession } = getConfig()\n  GroupMembership.clearStorage()\n  userSession.signUserOut('/data/login')\n  callback()\n}\n\nexport const encryptContent = message => {\n  const { userSession } = getConfig()\n  console.log('encrypting ' + message)\n  return userSession.encryptContent(message)\n}\n\nexport const loadMyData = () => {\n  const { userSession } = getConfig()\n  return userSession.getFile('content').then(content => {\n    if (content) {\n      return JSON.parse(content)\n    } else {\n      return {}\n    }\n  })\n}\n\nexport const saveAppData = (identifier, content) => {\n  const { userSession } = getConfig()\n  return userSession.putFile(`apps/${identifier}`, JSON.stringify(content))\n}\n\nexport const loadAppData = identifier => {\n  const { userSession } = getConfig()\n  return userSession.getFile(`apps/${identifier}`).then(content => {\n    if (content) {\n      return JSON.parse(content)\n    } else {\n      return {}\n    }\n  })\n}\n\nexport const saveMyData = content => {\n  const { userSession } = getConfig()\n  return userSession.putFile('content', JSON.stringify(content))\n}\n\nexport const postUserUpdate = async (visibility, userComment) => {\n  if (visibility === 'public') {\n    await userComment.save()\n  } else if (visibility === 'private') {\n    await userComment.savePrivately()\n  } else if (visibility === 'devs') {\n    throw new Error('not yet implemented')\n  }\n\n  return null\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n"],"sourceRoot":""}