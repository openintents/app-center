{"version":3,"sources":["webpack:///./src/app/components/NavBar.js","webpack:///./src/app/components/AppSelector.js","webpack:///./src/app/profile.js","webpack:///./src/app/main.js","webpack:///./src/app/components/PrivateRoute.js","webpack:///./src/app/login.js","webpack:///./src/app/app.js","webpack:///./src/pages/app.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/header.js","webpack:///./src/components/layout.js","webpack:///./src/app/services/blockstack.js"],"names":["NavBar","state","checking","signedIn","componentDidMount","checkIsSignedIn","then","_this","setState","render","content","message","login","_this$state","this","user","getUser","decentralizedID","username","profile","name","react_default","a","createElement","style","display","flex","justifyContent","borderBottom","backgroundColor","gatsby_browser_entry","to","href","onClick","event","preventDefault","logout","navigate","React","Component","StyledRoot","styled","div","withConfig","displayName","componentId","AppSelector","_ref","myApps","onSubmitApps","console","log","data","_3630975111","Fragment","formik_esm","initialValues","validate","values","onSubmit","_ref3","setSubmitting","finally","_ref2","i","app","handleChange","errors","touched","handleBlur","handleSubmit","isSubmitting","apps","allApps","edges","node","push","key","type","onChange","onBlur","checked","appcoid","id","htmlFor","disabled","Profile","loading","_this2","loadMyData","saveMyApps","saveMyData","_this3","email","components_AppSelector","Main","encryptedMessage","handleClick","encryptContent","target","value","renderApps","Object","keys","forEach","appEditLink","substr","filter","edge","toString","query","_230829525","PrivateRoute","location","props","pathname","search","startsWith","_this$props","component","rest","objectWithoutPropertiesLoose_default","Login","handleLogin","PublicRoute","children","App","layout","NavBar_NavBar","es","components_PrivateRoute","path","__webpack_require__","d","__webpack_exports__","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","StaticQueryContext","createContext","Consumer","staticQueryData","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","require","default","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","InternalPageRenderer","assign","json","shape","Header","siteTitle","background","marginBottom","margin","maxWidth","padding","color","textDecoration","defaultProps","Layout","header","site","siteMetadata","title","paddingTop","Date","getFullYear","_755544856","appConfig","AppConfig","window","origin","userSession","UserSession","isBrowser","isUserSignedIn","loadUserData","callback","isSignInPending","handlePendingSignIn","userData","redirectToSignIn","Promise","resolve","signUserOut","getFile","JSON","parse","loadAppData","identifier","putFile","stringify"],"mappings":"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","file":"component---src-pages-app-js-e19a426eb804733651bf.js","sourcesContent":["import React from 'react'\nimport { Link, navigate } from 'gatsby'\nimport { getUser, checkIsSignedIn, logout } from '../services/blockstack'\n\nexport default class NavBar extends React.Component {\n  state = {checking:true, signedIn:false}\n  componentDidMount = () => {\n      checkIsSignedIn().then(signedIn =>\n        this.setState({checking:false, signedIn})\n      )\n    }\n\n  render() {\n  const content = { message: '', login: true }\n  const {checking, signedIn} = this.state\n  if (checking) {\n    content.message = \"stacking blocks...\"\n  } else if (signedIn) {\n      const user = getUser()\n      content.message = `Hello, ${user.decentralizedID &&\n        user.username && user.profile.name}`\n  } else {\n      content.message = 'You are not logged in'\n  }\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: '1',\n        justifyContent: 'space-between',\n        borderBottom: '1px solid #d1c1e0',\n        backgroundColor: 'aliceblue',\n      }}\n    >\n      <span>{content.message}</span>\n\n      <nav>\n        <span>Navigate the app: </span>\n        <Link to=\"/app/\">Main</Link>\n        {` `}\n        <Link to=\"/app/profile\">Profile</Link>\n        {` `}\n        {signedIn ? (\n          <a\n            href=\"/\"\n            onClick={event => {\n              event.preventDefault()\n              logout(() => navigate(`/app/login`))\n            }}\n          >\n            Logout\n          </a>\n        ) : (\n          <Link to=\"/app/login\">Login</Link>\n        )}\n      </nav>\n    </div>\n  )\n}\n}\n","import React from 'react'\nimport { useStaticQuery, graphql } from 'gatsby'\nimport Grid from '@material-ui/core/Grid'\nimport styled from 'styled-components'\nimport { Formik } from 'formik'\n\nconst StyledRoot = styled.div`\n  flexgrow: 1;\n`\n\nconst AppSelector = ({myApps, onSubmitApps}) => {\n  console.log({myApps, onSubmitApps})\n  const data = useStaticQuery(graphql`\n    query AppsQuery {\n      allApps(sort: { fields: [name] }) {\n        edges {\n          node {\n            ...AppInformation\n          }\n        }\n      }\n    }\n  `)\n\n  const appSelectionForm = ({\n    values,\n    errors,\n    touched,\n    handleChange,\n    handleBlur,\n    handleSubmit,\n    isSubmitting,\n  }) => {\n    const apps = []\n    let i, app\n    for (i in data.allApps.edges) {\n      app = data.allApps.edges[i].node\n      apps.push(\n        <div key={i}>\n          <input\n            type=\"checkbox\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n            checked={values[`app-${app.appcoid}`] || false}\n            id={app.appcoid}\n            name={`app-${app.appcoid}`}\n          />\n          <label htmlFor={app.appcoid}>{app.name}</label>\n        </div>\n      )\n    }\n\n    return (\n      <form onSubmit={handleSubmit}>\n        {apps}\n        <button type=\"submit\" disabled={isSubmitting}>\n          Save\n        </button>\n      </form>\n    )\n  }\n  return (\n    <>\n      <h1>Your app(s)</h1>\n      <StyledRoot>\n        <Formik\n          initialValues={myApps}\n          validate={values => {\n            let errors = {}\n            return errors\n          }}\n          onSubmit={(values, { setSubmitting }) => {\n            onSubmitApps(values).finally(()=> {\n              setSubmitting(false)\n            })\n          }}\n        >\n          {appSelectionForm}\n        </Formik>\n      </StyledRoot>\n      <hr />\n    </>\n  )\n}\n\nexport default AppSelector\n","import React from 'react'\nimport { getUser, saveMyData, loadMyData } from './services/blockstack'\nimport AppSelector from './components/AppSelector'\n\nclass Profile extends React.Component {\n  state = {\n    myApps: {},\n    loading: true,\n  }\n\n  componentDidMount() {\n    loadMyData().then(content => {\n      this.setState({ myApps: content.myApps, loading: false })\n    })\n  }\n\n  saveMyApps(values) {\n    return saveMyData({ myApps: values })\n  }\n\n  render() {\n    const user = getUser()\n    const { myApps, loading } = this.state\n\n    return (\n      <>\n        <h1>Your profile</h1>\n        <ul>\n          <li>Name: {user.username && user.profile.name}</li>\n          <li>E-mail: {user.email}</li>\n        </ul>\n        {!loading && (\n          <AppSelector myApps={myApps} onSubmitApps={(values) => this.saveMyApps(values)} />\n        )}\n      </>\n    )\n  }\n}\n\nexport default Profile\n","import React from 'react'\nimport { graphql, Link, StaticQuery } from 'gatsby'\nimport { encryptContent, loadMyData } from './services/blockstack'\n\nclass Main extends React.Component {\n  state = {\n    message: 'My message',\n    encryptedMessage: '',\n    myApps: {},\n    loading: true,\n  }\n\n  componentDidMount() {\n    loadMyData().then(content => {\n      this.setState({ myApps: content.myApps, loading: false })\n    })\n  }\n\n  handleClick(event) {\n    const encryptedMessage = encryptContent(this.state.message)\n    this.setState({ encryptedMessage })\n  }\n\n  handleChange(event) {\n    this.setState({ message: event.target.value })\n  }\n\n  renderApps(myApps, data) {\n    const apps = []\n    if (myApps) {\n      Object.keys(myApps).forEach(key => {\n        if (myApps[key]) {\n          const appEditLink = `/appco-edit/${key.substr(4)}`\n          const app = data.allApps.edges.filter(edge => {\n            return edge.node.appcoid.toString() === key.substr(4)\n          })[0].node\n          apps.push(\n            <li key={key}>\n              <Link to={appEditLink}>{app.name}</Link>\n            </li>\n          )\n        }\n      })\n    } else {\n      apps.push(\n      <Link to='/app/profile'>Add apps in your profile</Link>\n      )\n    }\n    return apps\n  }\n  render() {\n    const { message, encryptedMessage, myApps } = this.state\n\n    return (\n      <StaticQuery\n        query={graphql`\n          query MainAppsQuery {\n            allApps(sort: { fields: [name] }) {\n              edges {\n                node {\n                  ...AppInformation\n                }\n              }\n            }\n          }\n        `}\n        render={data => (\n          <>\n            <h1>Your Apps</h1>\n            <ul>{this.renderApps(myApps, data)}</ul>\n          </>\n        )}\n      />\n    )\n  }\n}\n\nexport default Main\n","import React from 'react'\nimport { checkIsSignedIn } from '../services/blockstack'\nimport { navigate } from 'gatsby'\n\nclass PrivateRoute extends React.Component {\n  state = {checking:true, signedIn:false}\n\n  componentDidMount = () => {\n    const { location } = this.props\n    checkIsSignedIn().then(signedIn => {\n      if (location.pathname !== `/app/login`) {\n        if (!signedIn) {\n          // If the user is not logged in, redirect to the login page.\n          navigate(`/app/login`)\n          return null\n        } else {\n          if (location.search && location.search.startsWith(\"?authResponse=\")) {\n            navigate(`/app`)\n          }\n        }\n      }\n      this.setState({checking:false, signedIn})\n    })\n  }\n\n  render() {\n    const { component: Component, location, ...rest } = this.props\n    const {checking, signedIn} = this.state\n    if (checking) {\n      return <>...</>\n    } else {\n      return signedIn ? <Component {...rest} /> : null\n    }\n  }\n}\n\nexport default PrivateRoute\n","import React from 'react'\nimport { navigate } from 'gatsby'\nimport { handleLogin } from './services/blockstack'\n\nclass Login extends React.Component {\n  componentDidMount() {\n    const location = this.props\n    if (location && location.location && !!location.location.search && location.location.search.startsWith(\"?authResponse=\")) {\n      navigate(`/app`)\n    }\n  }\n\n  handleSubmit = () => handleLogin(user => navigate(`/app/profile`))\n  render() {\n    return (\n      <>\n        <h1>Log in</h1>\n        <button onClick={this.handleSubmit}>log in</button>\n      </>\n    )\n  }\n}\n\nexport default Login\n","import React from 'react'\nimport { Router } from '@reach/router'\nimport Layout from '../components/layout'\nimport NavBar from './components/NavBar'\nimport Profile from './profile'\nimport Main from './main'\nimport PrivateRoute from './components/PrivateRoute'\nimport Login from './login'\n\nconst App = () => {\n  return (\n    <Layout>\n      <NavBar />\n      <Router>\n        <PrivateRoute path=\"/app/profile\" component={Profile} />\n        <PublicRoute path=\"/app\">\n          <PrivateRoute path=\"/\" component={Main} />\n          <Login path=\"/login\" />\n        </PublicRoute>\n      </Router>\n    </Layout>\n  )\n}\nfunction PublicRoute(props) {\n  return <div>{props.children}</div>\n}\n\nexport default App\n","import App from '../app/app'\n\nexport default App\n\n// `src/app` is not \"special\", it is re-exported by `src/pages/app.js`\n// and contains all the clientside dynamic App pages that we dont want to be statically generated.\n// `src/pages/app.js` skips the static generation process because of `gatsby-plugin-create-client-paths`\n// configured in `gatsby-config.js`\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  if (!pageResources) {\n    return null\n  }\n\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import { Link } from 'gatsby'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nconst Header = ({ siteTitle }) => (\n  <div\n    style={{\n      background: `#5DBCD2`,\n      marginBottom: `1.45rem`,\n    }}\n  >\n    <div\n      style={{\n        margin: `0 auto`,\n        maxWidth: 960,\n        padding: `1.45rem 1.0875rem`,\n      }}\n    >\n      <h1 style={{ margin: 0 }}>\n        <Link\n          to=\"/\"\n          style={{\n            color: `white`,\n            textDecoration: `none`,\n          }}\n        >\n          {siteTitle}\n        </Link>\n      </h1>\n    </div>\n  </div>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { StaticQuery, graphql } from 'gatsby'\n\nimport Header from './header'\nimport './layout.css'\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query SiteTitleQuery {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `}\n    render={data => (\n      <>\n        <Header siteTitle={data.site.siteMetadata.title} />\n        <div\n          style={{\n            margin: `0 auto`,\n            maxWidth: 960,\n            padding: `0px 1.0875rem 1.45rem`,\n            paddingTop: 0,\n          }}\n        >\n          {children}\n          <footer>\n            © {new Date().getFullYear()}, Built with\n            {` `}\n            <a href=\"https://www.gatsbyjs.org\">Gatsby</a> and{' '}\n            <a href=\"https://blockstack.org\">Blockstack</a>.\n              {' '}You can{' '}\n              <a href=\"https://gitlab.com/friedger/app-center\">\n                view the source here\n              </a>\n          </footer>\n        </div>\n      </>\n    )}\n  />\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","import { UserSession, AppConfig } from 'blockstack'\n\n// helpful for debugging\nconst logAuth = process.env.NODE_ENV === 'development' && true // set to true to turn on logging\nconst clog = (...args) => logAuth && console.log(...args)\n// helpful for debugging\n\nconst appConfig = new AppConfig(\n  ['store_write'],\n  typeof window !== 'undefined'\n    ? window.location.origin\n    : 'http://localhost:8000',\n  '/app',\n  '/manifest.webmanifest'\n)\nconst userSession = new UserSession({ appConfig })\n\nexport const isBrowser = () => typeof window !== 'undefined'\n\nexport const getUser = () =>\n  isBrowser() && userSession.isUserSignedIn() ? userSession.loadUserData() : {}\n\nexport const handleLogin = callback => {\n  clog('isLoggedIn check', userSession.isUserSignedIn())\n  if (userSession.isUserSignedIn()) {\n    clog('logged in')\n    callback(getUser())\n  } else if (userSession.isSignInPending()) {\n    userSession.handlePendingSignIn().then(userData => {\n      callback(userData)\n    })\n  } else {\n    userSession.redirectToSignIn()\n  }\n}\n\nexport const checkIsSignedIn = () => {\n  if (!isBrowser()) {\n    clog('Not a browser')\n    return Promise.resolve(false)\n  }\n  if (userSession.isSignInPending()) {\n    return userSession.handlePendingSignIn().then(userData => true)\n  } else if (userSession.isUserSignedIn()) {\n    const user = userSession.loadUserData()\n    clog('isLoggedIn check', { user })\n    return Promise.resolve(!!user)\n  } else {\n    clog('isLoggedIn check - nothing')\n    return Promise.resolve(false)\n  }\n}\n\nexport const logout = callback => {\n  userSession.signUserOut('/app/login')\n  callback()\n}\n\nexport const encryptContent = message => {\n  console.log('encrypting ' + message)\n  return userSession.encryptContent(message)\n}\n\nexport const loadMyData = () => {\n  return userSession.getFile('content').then(content => {\n    if (content) {\n      return JSON.parse(content)\n    } else {\n      return {}\n    }\n  })\n}\n\nexport const saveAppData = (identifier, content) => {\n  return userSession.putFile(`apps/${identifier}`, JSON.stringify(content))\n}\n\nexport const loadAppData = (identifier) => {\n  return userSession.getFile(`apps/${identifier}`).then(content => {\n    if (content) {\n      return JSON.parse(content)\n    } else {\n      return {}\n    }\n  })\n}\n\nexport const saveMyData = content => {\n  return userSession.putFile('content', JSON.stringify(content))\n}\n"],"sourceRoot":""}