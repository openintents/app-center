{"version":3,"sources":["webpack:///./src/components/search.js","webpack:///./src/components/blockstackProfile.js","webpack:///./src/components/header.js","webpack:///./src/components/layout.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/app/services/blockstack.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js"],"names":["Search","props","_this","_Component","call","this","getOrCreateIndex","index","Index","load","searchIndex","search","evt","query","target","value","setState","results","expand","map","_ref","ref","documentStore","getDoc","state","render","_this2","react_default","a","createElement","gatsby_browser_entry","data","type","onChange","placeholder","List","page","appNodes","allApps","edges","filter","e","node","appcoid","icon","length","localFile","childImageSharp","gatsby_image_default","fixed","width","height","ListItem","key","id","to","style","color","fontWeight","textDecoration","Grid","container","item","xs","Typography","name","category","description","_1693737245","Component","BlockstackProfile","isSignedIn","isLoading","componentDidMount","checkIsSignedIn","then","signedIn","userData","getUser","signIn","redirectToSignIn","avatars","avatar","_this3","_this$state","profile","image","i","contentUrl","Avatar","alt","username","src","cursor","marginBottom","onClick","navigateTo","AccountBox_default","dist","variant","Header","siteTitle","siteDescription","siteSearchIndex","Container","background","paddingTop","sm","search_Search","blockstackProfile","propTypes","PropTypes","string","defaultProps","styles","smallIcon","Layout","children","Fragment","header","site","siteMetadata","title","margin","maxWidth","padding","fontSize","Date","getFullYear","href","getApiServer","_2239313339","isRequired","__webpack_require__","d","__webpack_exports__","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","StaticQueryContext","React","createContext","StaticQueryDataRenderer","staticQueryData","finalData","Consumer","object","func","appConfig","AppConfig","window","location","origin","uSession","UserSession","configure","apiServer","process","userSession","getConfig","isBrowser","isUserSignedIn","loadUserData","handleLogin","callback","console","log","isSignInPending","handlePendingSignIn","User","createWithCurrentUser","Promise","resolve","logout","GroupMembership","clearStorage","signUserOut","encryptContent","message","loadMyData","getFile","content","JSON","parse","saveMyData","putFile","stringify","m","module","exports","require","default","ProdPageRenderer","pageResources","InternalPageRenderer","Object","assign","json","shape","pathname"],"mappings":"+PAOqBA,cACnB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAqFFC,iBAAmB,kBACjBJ,EAAKK,MACDL,EAAKK,MAELC,QAAMC,KAAKP,EAAKD,MAAMS,cA1FTR,EA4FnBS,OAAS,SAAAC,GACP,IAAMC,EAAQD,EAAIE,OAAOC,MACzBb,EAAKK,MAAQL,EAAKI,mBAClBJ,EAAKc,SAAS,CACZH,QAEAI,QAASf,EAAKK,MACXI,OAAOE,EAAO,CAAEK,QAAQ,IAExBC,IAAI,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,IAAH,OAAanB,EAAKK,MAAMe,cAAcC,OAAOF,QAnGtDnB,EAAKsB,MAAQ,CACXX,MAAK,GACLI,QAAS,IAJMf,8BAQnBuB,OAAA,WAAS,IAAAC,EAAArB,KACP,OACEsB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEjB,MAAK,aAmBLY,OAAQ,SAAAM,GACN,OACEJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEG,KAAK,OACLjB,MAAOW,EAAKF,MAAMX,MAClBoB,SAAUP,EAAKf,OACfuB,YAAY,4BAEdP,EAAAC,EAAAC,cAACM,EAAA,EAAD,KACGT,EAAKF,MAAMP,QAAQE,IAAI,SAAAiB,GACtB,IAAMC,EAAWN,EAAKO,QAAQC,MAAMC,OAClC,SAAAC,GAAC,OAAIA,EAAEC,KAAKC,UAAYP,EAAKO,UAEzBC,EACJP,EAASQ,OAAS,GAClBR,EAAS,GAAGK,KAAKI,WACjBT,EAAS,GAAGK,KAAKI,UAAUC,gBACzBpB,EAAAC,EAAAC,cAACmB,EAAApB,EAAD,CACEqB,MAAOZ,EAAS,GAAGK,KAAKI,UAAUC,gBAAgBE,QAGpDtB,EAAAC,EAAAC,cAAA,OAAKqB,MAAM,OAAOC,OAAO,SAE7B,OACExB,EAAAC,EAAAC,cAACuB,EAAA,EAAD,CAAUC,IAAKjB,EAAKkB,IAClB3B,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEyB,GAAI,UAAYnB,EAAKO,QACrBa,MAAO,CACLC,MAAK,QACLC,WAAY,OACZC,eAAc,SAGhBhC,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAMC,WAAS,GACblC,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACZnB,GAEHjB,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,IACbpC,EAAAC,EAAAC,cAACmC,EAAA,EAAD,KACErC,EAAAC,EAAAC,cAAA,SAAIO,EAAK6B,MACR,KAAO7B,EAAK8B,SAFf,IAE0B,MAAQ9B,EAAK+B,sBA7D7DpC,KAAAqC,QAX8BC,0DCuDrBC,sJAlDb9C,MAAQ,CACN+C,YAAY,EACZC,WAAW,yCAGbC,kBAAA,WAAoB,IAAA/C,EAAArB,KAClBqE,cAAkBC,KAAK,SAAAC,GACrBlD,EAAKV,SAAS,CAAEuD,WAAYK,EAAUC,SAAUC,qBAIpDC,OAAA,WACEC,iBAGFvD,OAAA,WAAS,IAGDwD,EAASC,EAHRC,EAAA9E,KAAA+E,EAC0B/E,KAAKmB,MAA9B+C,EADDa,EACCb,WAAYM,EADbO,EACaP,SACpB,OAAIN,GAEEM,EAASQ,SAAWR,EAASQ,QAAQC,QACvCL,EAAUJ,EAASQ,QAAQC,MAAM9C,OAAO,SAAA+C,GAAC,MAAe,WAAXA,EAAEtB,QAE7CgB,GAAWA,EAAQpC,OAAS,IAC9BqC,EAASD,EAAQ,GAAGO,YAElBN,EAEAvD,EAAAC,EAAAC,cAAC4D,EAAA,EAAD,CACEC,IAAKb,EAASc,SACdC,IAAKV,EACL1B,MAAO,CAAEqC,OAAQ,UAAWC,aAAc,WAC1CC,QAAS,kBAAMC,YAAW,WAK5BrE,EAAAC,EAAAC,cAAC4D,EAAA,EAAD,CACEM,QAAS,kBAAMC,YAAW,SAC1BxC,MAAO,CAAEqC,OAAQ,UAAWC,aAAc,YAE1CnE,EAAAC,EAAAC,cAACoE,EAAArE,EAAD,QAKCD,EAAAC,EAAAC,cAACqE,EAAA,iBAAD,CAAkBC,QAAQ,QAAQJ,QAAS,kBAAMZ,EAAKJ,gBA9CnCV,sBCJ1B+B,EAAS,SAAAhF,GAAA,IAAGiF,EAAHjF,EAAGiF,UAAWC,EAAdlF,EAAckF,gBAAiBC,EAA/BnF,EAA+BmF,gBAA/B,OACb5E,EAAAC,EAAAC,cAAC2E,EAAA,EAAD,CACEhD,MAAO,CACLiD,WAAY,UACZC,WAAY,UACZjD,MAAO,UAGT9B,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAMC,WAAS,GACblC,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAME,MAAI,EAAC6C,GAAI,EAAG5C,GAAI,IACpBpC,EAAAC,EAAAC,cAACmC,EAAA,EAAD,CAAYmC,QAAQ,MAClBxE,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMyB,GAAG,IAAIC,MAAO,CAAEC,MAAO,QAASE,eAAgB,SACnD0C,IAGL1E,EAAAC,EAAAC,cAACmC,EAAA,EAAD,CAAYmC,QAAQ,SAASG,GAC7B3E,EAAAC,EAAAC,cAAC+E,EAAD,CAAQlG,YAAa6F,EAAgBhG,SAEvCoB,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAME,MAAI,EAAC6C,GAAI,EAAG5C,GAAI,IACpBpC,EAAAC,EAAAC,cAACgF,EAAD,UAMRT,EAAOU,UAAY,CACjBT,UAAWU,IAAUC,OACrBV,gBAAiBS,IAAUC,QAG7BZ,EAAOa,aAAe,CACpBZ,UAAS,IAGID,+CChCR,IAAMc,EAAS,CACpBC,UAAW,CACTjE,MAAO,GACPC,OAAQ,KAINiE,EAAS,SAAAhG,GAAA,IAAGiG,EAAHjG,EAAGiG,SAAH,OACb1F,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEjB,MAAK,aAaLY,OAAQ,SAAAM,GAAI,OACVJ,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0F,SAAA,KACE3F,EAAAC,EAAAC,cAAC0F,EAAD,CACElB,UAAWtE,EAAKyF,KAAKC,aAAaC,MAClCpB,gBAAiBvE,EAAKyF,KAAKC,aAAatD,YACxCoC,gBAAiBxE,EAAKwE,kBAExB5E,EAAAC,EAAAC,cAAA,OACE2B,MAAO,CACLmE,OAAM,SACNC,SAAU,IACVC,QAAO,wBACPnB,WAAY,IAGbW,EACD1F,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAACmC,EAAA,EAAD,CAAYmC,QAAQ,QAAQ3C,MAAO,CAAEsE,SAAU,UAA/C,MACK,IAAIC,MAAOC,cADhB,mBAGErG,EAAAC,EAAAC,cAAA,KAAGoG,KAAK,4BAAR,UAHF,OAGoD,IAClDtG,EAAAC,EAAAC,cAAA,KAAGoG,KAAK,0BAAR,cAJF,YAI2D,IACzDtG,EAAAC,EAAAC,cAAA,KAAGoG,KAAK,0CAAR,wBAGAtG,EAAAC,EAAAC,cAAA,WARF,kBASkBqG,mBAxC5BnG,KAAAoG,KAiDFf,EAAON,UAAY,CACjBO,SAAUN,IAAUrE,KAAK0F,YAGZhB,wCCtEfiB,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,GAAAK,EAAAL,EAAAM,EAAAF,GAAAG,EAAAP,EAAA,GAAAQ,EAAAR,EAAAM,EAAAC,GAAAE,EAAAT,EAAA,IAAAU,EAAAV,EAAAM,EAAAG,GAAAT,EAAAC,EAAAC,EAAA,sBAAAQ,EAAAnH,IAAAyG,EAAAC,EAAAC,EAAA,sBAAAO,EAAA,WAAAT,EAAAC,EAAAC,EAAA,sBAAAO,EAAA,aAAAT,EAAA,SAaMW,EAAqBC,IAAMC,cAAc,IAE/C,SAASC,EAAT/H,GAA2E,IAAxCgI,EAAwChI,EAAxCgI,gBAAiBrH,EAAuBX,EAAvBW,KAAMlB,EAAiBO,EAAjBP,MAAOY,EAAUL,EAAVK,OACzD4H,EAAYtH,EACdA,EAAKA,KACLqH,EAAgBvI,IAAUuI,EAAgBvI,GAAOkB,KAErD,OACE2G,EAAA9G,EAAAC,cAAC6G,EAAA9G,EAAM0F,SAAP,KACG+B,GAAa5H,EAAO4H,IACnBA,GAAaX,EAAA9G,EAAAC,cAAA,qCAKrB,IAAM2G,EAAc,SAAAvI,GAAS,IACnB8B,EAAkC9B,EAAlC8B,KAAMlB,EAA4BZ,EAA5BY,MAAOY,EAAqBxB,EAArBwB,OAAQ4F,EAAapH,EAAboH,SAE7B,OACEqB,EAAA9G,EAAAC,cAACmH,EAAmBM,SAApB,KACG,SAAAF,GAAe,OACdV,EAAA9G,EAAAC,cAACsH,EAAD,CACEpH,KAAMA,EACNlB,MAAOA,EACPY,OAAQA,GAAU4F,EAClB+B,gBAAiBA,OA6B3BZ,EAAY1B,UAAY,CACtB/E,KAAMgF,IAAUwC,OAChB1I,MAAOkG,IAAUC,OAAOoB,WACxB3G,OAAQsF,IAAUyC,KAClBnC,SAAUN,IAAUyC,+XC/DhBC,EAAY,IAAIC,YACpB,CAAC,cAAe,gBACE,oBAAXC,OACHA,OAAOC,SAASC,OAChB,wBACJ,QACA,yBAEIC,EAAW,IAAIC,cAAY,CAAEN,cAEnCO,oBAAU,CACRC,UAAWC,mCACXC,YAAaL,IAGR,IAAM5B,EAAe,kBAAMkC,sBAAYH,WAIjCI,EAAY,iBAAwB,oBAAXV,QAEzB7E,EAAU,WAAM,IACnBqF,EAAgBC,sBAAhBD,YACR,OAAOE,KAAeF,EAAYG,iBAC9BH,EAAYI,eACZ,IAQOC,EAAc,SAAAC,GAAY,IAC7BN,EAAgBC,sBAAhBD,YACRO,QAAQC,IAAI,eACaR,EAAYG,iBACjCH,EAAYG,iBAEdG,EAAS3F,KACAqF,EAAYS,kBACrBT,EAAYU,sBAAsBlG,KAAK,SAAAE,GACrCiG,OAAKC,wBAAwBpG,KAAK,WAChC+F,QAAQC,IAAI,gBACZF,EAAS5F,OAIbsF,EAAYnF,oBAIHA,EAAmB,WACNoF,sBAAhBD,YACInF,oBAGDN,EAAkB,WAC7B,IAAK2F,IAEH,OAAOW,QAAQC,SAAQ,GAHU,IAK3Bd,EAAgBC,sBAAhBD,YACR,OAAIA,EAAYS,kBACPT,EACJU,sBACAlG,KAAK,kBAAMmG,OAAKC,wBAAwBpG,KAAK,kBAAM,MAC7CwF,EAAYG,iBACdU,QAAQC,SAAQ,GAGhBD,QAAQC,SAAQ,IAIdC,EAAS,SAAAT,GAAY,IACxBN,EAAgBC,sBAAhBD,YACRgB,kBAAgBC,eAChBjB,EAAYkB,YAAY,eACxBZ,KAGWa,EAAiB,SAAAC,GAAW,IAC/BpB,EAAgBC,sBAAhBD,YAER,OADAO,QAAQC,IAAI,cAAgBY,GACrBpB,EAAYmB,eAAeC,IAGvBC,EAAa,WAExB,OADwBpB,sBAAhBD,YACWsB,QAAQ,WAAW9G,KAAK,SAAA+G,GACzC,OAAIA,EACKC,KAAKC,MAAMF,GAEX,MAqBAG,EAAa,SAAAH,GAExB,OADwBtB,sBAAhBD,YACW2B,QAAQ,UAAWH,KAAKI,UAAUL,0BC7HvD,IAAsBM,EAKpBC,EAAOC,SALaF,EAKWG,EAAQ,OALRH,EAAEI,SAAYJ,6FCKzCK,EAAmB,SAAAjL,GAAiC,IAA9BwI,EAA8BxI,EAA9BwI,SAAU0C,EAAoBlL,EAApBkL,cACpC,OAAKA,EAGErD,IAAMpH,cAAc0K,IAApBC,OAAAC,OAAA,CACL7C,WACA0C,iBACGA,EAAcI,OALV,MASXL,EAAiBvF,UAAY,CAC3B8C,SAAU7C,IAAU4F,MAAM,CACxBC,SAAU7F,IAAUC,OAAOoB,aAC1BA,YAGUiE","file":"2-31165531707ecab3b13b.js","sourcesContent":["import React, { Component } from 'react'\nimport { Index } from 'elasticlunr'\nimport { Link, graphql, StaticQuery } from 'gatsby'\nimport { List, ListItem, Typography, Grid } from '@material-ui/core'\nimport Img from 'gatsby-image'\n// Search component\n\nexport default class Search extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      query: ``,\n      results: [],\n    }\n  }\n\n  render() {\n    return (\n      <StaticQuery\n        query={graphql`\n          query SearchQuery {\n            allApps {\n              edges {\n                node {\n                  appcoid: id__normalized\n                  localFile {\n                    id\n                    childImageSharp {\n                      fixed(width: 24, height: 24) {\n                        ...GatsbyImageSharpFixed\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        `}\n        render={data => {\n          return (\n            <div>\n              <input\n                type=\"text\"\n                value={this.state.query}\n                onChange={this.search}\n                placeholder=\"Search apps by name, ..\"\n              />\n              <List>\n                {this.state.results.map(page => {\n                  const appNodes = data.allApps.edges.filter(\n                    e => e.node.appcoid === page.appcoid\n                  )\n                  const icon =\n                    appNodes.length > 0 &&\n                    appNodes[0].node.localFile &&\n                    appNodes[0].node.localFile.childImageSharp ? (\n                      <Img\n                        fixed={appNodes[0].node.localFile.childImageSharp.fixed}\n                      />\n                    ) : (\n                      <div width=\"24px\" height=\"24px\" />\n                    )\n                  return (\n                    <ListItem key={page.id}>\n                      <Link\n                        to={'/appco/' + page.appcoid}\n                        style={{\n                          color: `white`,\n                          fontWeight: 'bold',\n                          textDecoration: `none`,\n                        }}\n                      >\n                        <Grid container>\n                          <Grid item xs={1}>\n                            {icon}\n                          </Grid>\n                          <Grid item xs={11}>\n                            <Typography>\n                              <b>{page.name}</b>\n                              {': ' + page.category} {' : ' + page.description}\n                            </Typography>\n                          </Grid>\n                        </Grid>\n                      </Link>\n                    </ListItem>\n                  )\n                })}\n              </List>\n            </div>\n          )\n        }}\n      />\n    )\n  }\n  getOrCreateIndex = () =>\n    this.index\n      ? this.index\n      : // Create an elastic lunr index and hydrate with graphql query results\n        Index.load(this.props.searchIndex)\n\n  search = evt => {\n    const query = evt.target.value\n    this.index = this.getOrCreateIndex()\n    this.setState({\n      query,\n      // Query the index with search string to get an [] of IDs\n      results: this.index\n        .search(query, { expand: true })\n        // Map over each ID and return the full document\n        .map(({ ref }) => this.index.documentStore.getDoc(ref)),\n    })\n  }\n}\n","import React, { Component } from 'react'\nimport {\n  getUser,\n  redirectToSignIn,\n  checkIsSignedIn,\n} from '../app/services/blockstack'\nimport { Avatar } from '@material-ui/core'\nimport AccountIcon from '@material-ui/icons/AccountBox'\nimport { BlockstackButton } from 'react-blockstack-button'\nimport { navigateTo } from 'gatsby'\n\nclass BlockstackProfile extends Component {\n  state = {\n    isSignedIn: false,\n    isLoading: true,\n  }\n\n  componentDidMount() {\n    checkIsSignedIn().then(signedIn => {\n      this.setState({ isSignedIn: signedIn, userData: getUser() })\n    })\n  }\n\n  signIn() {\n    redirectToSignIn()\n  }\n\n  render() {\n    const { isSignedIn, userData } = this.state\n    if (isSignedIn) {\n      let avatars, avatar\n      if (userData.profile && userData.profile.image) {\n        avatars = userData.profile.image.filter(i => i.name === 'avatar')\n      }\n      if (avatars && avatars.length > 0) {\n        avatar = avatars[0].contentUrl\n      }\n      if (avatar) {\n        return (\n          <Avatar\n            alt={userData.username}\n            src={avatar}\n            style={{ cursor: 'pointer', marginBottom: 1.45 + 'rem' }}\n            onClick={() => navigateTo('data')}\n          />\n        )\n      } else {\n        return (\n          <Avatar\n            onClick={() => navigateTo('data')}\n            style={{ cursor: 'pointer', marginBottom: 1.45 + 'rem' }}\n          >\n            <AccountIcon />\n          </Avatar>\n        )\n      }\n    } else {\n      return <BlockstackButton variant=\"light\" onClick={() => this.signIn()} />\n    }\n  }\n}\n\nexport default BlockstackProfile\n","import { Link } from 'gatsby'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport Search from './search'\nimport BlockstackProfile from './blockstackProfile'\nimport { Container, Typography, Grid } from '@material-ui/core'\n\nconst Header = ({ siteTitle, siteDescription, siteSearchIndex }) => (\n  <Container\n    style={{\n      background: '#3f51b5',\n      paddingTop: 1.45 + `rem`,\n      color: 'white',\n    }}\n  >\n    <Grid container>\n      <Grid item sm={8} xs={12}>\n        <Typography variant=\"h3\">\n          <Link to=\"/\" style={{ color: 'white', textDecoration: 'none' }}>\n            {siteTitle}\n          </Link>\n        </Typography>\n        <Typography variant=\"body2\">{siteDescription}</Typography>\n        <Search searchIndex={siteSearchIndex.index} />\n      </Grid>\n      <Grid item sm={4} xs={12}>\n        <BlockstackProfile />\n      </Grid>\n    </Grid>\n  </Container>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n  siteDescription: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { StaticQuery, graphql } from 'gatsby'\n\nimport Header from './header'\nimport './layout.css'\nimport { Typography } from '@material-ui/core'\nimport { getApiServer } from '../app/services/blockstack'\n\nexport const styles = {\n  smallIcon: {\n    width: 27,\n    height: 27,\n  },\n}\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query SiteHeaderQuery {\n        site {\n          siteMetadata {\n            title\n            description\n          }\n        }\n        siteSearchIndex {\n          index\n        }\n      }\n    `}\n    render={data => (\n      <>\n        <Header\n          siteTitle={data.site.siteMetadata.title}\n          siteDescription={data.site.siteMetadata.description}\n          siteSearchIndex={data.siteSearchIndex}\n        />\n        <div\n          style={{\n            margin: `0 auto`,\n            maxWidth: 960,\n            padding: `0px 1.0875rem 1.45rem`,\n            paddingTop: 0,\n          }}\n        >\n          {children}\n          <footer>\n            <Typography variant=\"body2\" style={{ fontSize: 'small' }}>\n              © {new Date().getFullYear()}, Built with\n              {` `}\n              <a href=\"https://www.gatsbyjs.org\">Gatsby</a> and{' '}\n              <a href=\"https://blockstack.org\">Blockstack</a>. You can{' '}\n              <a href=\"https://gitlab.com/friedger/app-center\">\n                view the source here\n              </a>\n              <br />\n              Radiks Server: {getApiServer()}\n            </Typography>\n          </footer>\n        </div>\n      </>\n    )}\n  />\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","import { UserSession, AppConfig } from 'blockstack'\nimport { configure, getConfig, User, GroupMembership } from 'radiks'\n\n// helpful for debugging\nconst logAuth = process.env.NODE_ENV === 'development' && true // set to true to turn on logging\nconst clog = (...args) => logAuth && console.log(...args)\n// helpful for debugging\n\nconst appConfig = new AppConfig(\n  ['store_write', 'publish_data'],\n  typeof window !== 'undefined'\n    ? window.location.origin\n    : 'http://localhost:8000',\n  '/data',\n  '/manifest.webmanifest'\n)\nconst uSession = new UserSession({ appConfig })\n\nconfigure({\n  apiServer: process.env.GATSBY_RADIKS_SERVER || 'http://localhost:1260',\n  userSession: uSession,\n})\n\nexport const getApiServer = () => getConfig().apiServer\n\nexport const getPersonalKey = () => JSON.stringify(User.currentUser())\n\nexport const isBrowser = () => typeof window !== 'undefined'\n\nexport const getUser = () => {\n  const { userSession } = getConfig()\n  return isBrowser() && userSession.isUserSignedIn()\n    ? userSession.loadUserData()\n    : {}\n}\n\nexport const isSignedIn = () => {\n  const { userSession } = getConfig()\n  return isBrowser() && userSession.isUserSignedIn()\n}\n\nexport const handleLogin = callback => {\n  const { userSession } = getConfig()\n  console.log('handleLogin')\n  clog('isLoggedIn check', userSession.isUserSignedIn())\n  if (userSession.isUserSignedIn()) {\n    clog('logged in')\n    callback(getUser())\n  } else if (userSession.isSignInPending()) {\n    userSession.handlePendingSignIn().then(userData => {\n      User.createWithCurrentUser().then(() => {\n        console.log('user created')\n        callback(userData)\n      })\n    })\n  } else {\n    userSession.redirectToSignIn()\n  }\n}\n\nexport const redirectToSignIn = () => {\n  const { userSession } = getConfig()\n  userSession.redirectToSignIn()\n}\n\nexport const checkIsSignedIn = () => {\n  if (!isBrowser()) {\n    clog('Not a browser')\n    return Promise.resolve(false)\n  }\n  const { userSession } = getConfig()\n  if (userSession.isSignInPending()) {\n    return userSession\n      .handlePendingSignIn()\n      .then(() => User.createWithCurrentUser().then(() => true))\n  } else if (userSession.isUserSignedIn()) {\n    return Promise.resolve(true)\n  } else {\n    clog('isLoggedIn check - nothing')\n    return Promise.resolve(false)\n  }\n}\n\nexport const logout = callback => {\n  const { userSession } = getConfig()\n  GroupMembership.clearStorage()\n  userSession.signUserOut('/data/login')\n  callback()\n}\n\nexport const encryptContent = message => {\n  const { userSession } = getConfig()\n  console.log('encrypting ' + message)\n  return userSession.encryptContent(message)\n}\n\nexport const loadMyData = () => {\n  const { userSession } = getConfig()\n  return userSession.getFile('content').then(content => {\n    if (content) {\n      return JSON.parse(content)\n    } else {\n      return {}\n    }\n  })\n}\n\nexport const saveAppData = (identifier, content) => {\n  const { userSession } = getConfig()\n  return userSession.putFile(`apps/${identifier}`, JSON.stringify(content))\n}\n\nexport const loadAppData = identifier => {\n  const { userSession } = getConfig()\n  return userSession.getFile(`apps/${identifier}`).then(content => {\n    if (content) {\n      return JSON.parse(content)\n    } else {\n      return {}\n    }\n  })\n}\n\nexport const saveMyData = content => {\n  const { userSession } = getConfig()\n  return userSession.putFile('content', JSON.stringify(content))\n}\n\nexport const postUserUpdate = async (visibility, userComment) => {\n  if (visibility === 'public') {\n    await userComment.save()\n  } else if (visibility === 'private') {\n    await userComment.savePrivately()\n  } else if (visibility === 'devs') {\n    throw new Error('not yet implemented')\n  }\n\n  return null\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n"],"sourceRoot":""}